name: Deploy to Vercel

on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest
    # Hobbyãƒ—ãƒ©ãƒ³ã§ã¯ã€ç¬¬ä¸‰è€…ã®ã‚³ãƒŸãƒƒãƒˆã§ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ãŸã‚ã«å¿…è¦
    steps:
      - name: Trigger Vercel Deployment
        run: |
          if [ -z "${{ secrets.VERCEL_DEPLOY_HOOK_URL }}" ]; then
            echo "âš ï¸ VERCEL_DEPLOY_HOOK_URL ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚"
            echo "GitHubãƒªãƒã‚¸ãƒˆãƒªã® Settings â†’ Secrets and variables â†’ Actions ã§è¨­å®šã—ã¦ãã ã•ã„ã€‚"
            exit 1
          fi

          echo "ğŸš€ Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ãƒˆãƒªã‚¬ãƒ¼ã—ã¦ã„ã¾ã™..."
          curl -X POST "${{ secrets.VERCEL_DEPLOY_HOOK_URL }}"

          if [ $? -eq 0 ]; then
            echo "âœ… ãƒ‡ãƒ—ãƒ­ã‚¤ãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã¾ã—ãŸ"
          else
            echo "âŒ ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãƒˆãƒªã‚¬ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ"
            exit 1
          fi
